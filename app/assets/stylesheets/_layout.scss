///////////////////////////////////////////////////////////////////////////////
//
//  Basic Application Layout
//
///////////////////////////////////////////////////////////////////////////////

html {
    body {
        background-color: $body-color;
        background: $body-color image-url('bg-noise.png');
    }
}

.wrapper {
    @include outer-container;
    padding: 0 1em;

    @include media($max-width) {
        padding: 0;
    }
}

img {
    width: 100%;
    max-width: 100%;
}

section {
    padding: $base-line-height 0;
}

.featured {
    @extend %dark;

    .thumb {
        margin: $base-line-height 0;
    }
}

ol.thumbs {
    @include row;
    list-style: none;
    padding: 0;

    li.thumb {
        margin-bottom: $base-line-height;

        @include media($mobile) {
            @include span-columns(4);
        }

        @include media($tablet-only) {
            @include span-columns(4);
            @include omega(2n);
        }

        @include media($desktop) {
            @include span-columns(4);
            @include omega(3n);
        }

        div.identity {
            @include span-columns(2 of 4);

            p.title {
                margin: .5em 0 0;
            }

            p.author {
                font-size: .75em;
            }
        }

        div.stats {
            @include span-columns(2 of 4);
            text-align: right;

            canvas {
                margin-top: .6875rem;
            }

            span.average-rating {
                font: 400 1.75em $header-font-family;
            }
        }
    }
}

.img-wrap {
    @include transition;
    position: relative;

    img {
        @include transition;
        max-width: 100%;
        position: relative;
        display: block;
    }

    .img-shadow {
        @include transition;
        background-color: rgba(0,0,0,0.1);
        border: 1px solid rgba(0,0,0,0.15);
        bottom: 5px;
        left: 5px;
        position: absolute;
        right: 5px;
        top: 5px;
        z-index: 1;
    }
}

.thumb .img-wrap {
    @include box-shadow(0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1));
    @include linear-gradient(#fdfdfd, #fff);
    background-color: #fff;
    border: 1px solid rgba(255,255,255,0.15);

    img {
        padding: 5px;
    }
}

.row {
    @include row();
}

.submission .thumb .img-wrap {
    background: none;
    border: none;

    img {
        padding: 0px;
    }

    .img-shadow {
        background: none;
        border: 8px solid rgba(255,255,255,.1);
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }
}

.avatar {
    img {
        border-radius: 3px;
        display: block;
    }

    .img-shadow {
        @include box-shadow(inset 0 1px rgba(0,0,0,.2));
        border: 1px solid rgba(0,0,0,0.25);
        border-radius: 3px;
        bottom: 0px;
        left: 0px;
        right: 0px;
        top: 0px;

        &:hover {
            @include box-shadow(inset 0 1px rgba(255,255,255,0.15));
        }
    }
}

.img-wrap:hover .img-shadow {
    background-color: rgba(0,0,0,0);
}

ol.forum-posts {
    padding: 0;

    li.forum-post {
        @include clearfix;
        margin-bottom: $base-line-height;

        @include media($tablet-only) {
            @include span-columns(4);
            @include omega(2n);
        }

        @include media($desktop) {
            @include span-columns(4);
            @include omega(3n);
        }

        .avatar {
            @include span-columns(1 of 4);
        }

        hgroup {
            @include span-columns(3 of 4);

            h5 {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }
    }
}

// Submission
.submission {
    @extend %dark;

    .vcard {
        @include clearfix;
    }

    .avatar {
        width: 4.25rem;
        margin-right: $gutter;
        float: left;
    }

    .byline {
        margin-top: .5em;

        p {
            font-size: 1.25em;
        }
    }

    .thumb {
        margin: $gutter auto;
        display: table;

        img {
            width: 100%;
        }
    }
}

.submission-details {
    @include clearfix;
    padding: $base-line-height $gutter;

    .notes {
        @include span-columns(9);

        @include media($mobile) {
            @include span-columns(4);
        }

        h2 {
            margin-top:0;
        }
    }

    .meta {
        @include span-columns(3);

        @include media($mobile) {
            @include span-columns(4);

            ol {
                padding: 0;
                margin-top: $base-line-height;
            }
        }

        li {
            padding: .5rem 0 .5rem .75rem;
            border-bottom: 1px solid rgba(255,255,255,.1);
        }


        i {
            margin-right: .5em;
        }

    }
}

.comments {
    ol li {
        @include span-columns(12);
        border-bottom: 1px solid $base-border-color;
        padding: $base-line-height 0;

        .avatar {
            width: 4.25rem;
            margin-right: $gutter;
            float: left;
        }

        .comment-body, form {
            width: -webkit-calc(100% - 4.25rem - #{$gutter});
            width: -moz-calc(100% - 4.25rem - #{$gutter});
            width: calc(100% - 4.25rem - #{$gutter});
            float: left;

            h2 {
                margin-top: 0;
            }
        }

        textarea {
            width: 100%;
            height: $base-line-height * 8;
        }

        input[type="submit"] {
            float: right;
        }
    }
}

.user-info {
    .avatar {
        @include span-columns(1);
    }
}
.thumb {
    .comment {
        @include span-columns(4 of 4);

        span {
            float: left;
            width: 2em;
            margin-right: $gutter * .5;
            display: block;
        }

        .comment-body {
            width: -webkit-calc(100% - 2em - #{$gutter * .5});
            width: -moz-calc(100% - 2em - #{$gutter *  .5});
            width: calc(100% - 2em - #{$gutter * .5});
            float: left;
        }
    }
}
